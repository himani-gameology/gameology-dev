{% liquid
  for tag in product.tags
    if tag contains 'preorder'
      assign isPreorderProd = true
      break
    endif
  endfor

  assign listCollection = product.collections | where: 'handle', 'trading-card-game' | size
  assign inventoryQty = product.selected_or_first_available_variant.inventory_quantity
  
  assign moddedViewNumber = viewNumber

  if inventoryQty == 0
    break
  endif

  if listCollection > 0 or isPreorderProd or inventoryQty < 10
  else
    break
  endif
%}

{% case viewNumber %}
  {% when 0 %}
    {% assign min = 5 %}
    {% assign max = 10 %}
    {% assign diff = max | minus: min %}
    {% assign moddedViewNumber = "now" | date: "%N" | modulo: diff | plus: min %}
  {% when 1..9 %}
    {% assign min = 11 %}
    {% assign max = 20 %}
    {% assign diff = max | minus: min %}
    {% assign moddedViewNumber = "now" | date: "%N" | modulo: diff | plus: min %}
  {% when 10..49 %}
    {% assign moddedViewNumber = viewNumber | times: 2 %}
  {% when 50..99 %}
    {% assign moddedViewNumber = viewNumber | times: 2 %}
  {% else %}
    {% assign moddedViewNumber = viewNumber | times: 2 %}
{% endcase %}

<div class="fomo-product show-test_165">
  <div class="fomo-inner">
    <span class="js-viewing-random">{{ viewNumber }}</span> {{ viewNumber | pluralize: 'user', 'users' }} are viewing
    this product!
    <br>
    <span class="js-sold-random">{{ soldNumber }}</span> sold in the last hour
  </div>
</div>


<div class="fomo-product show-test_208">
  <div class="fomo-inner">
    {% if moddedViewNumber >= 200 %}
      <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_151_41)">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M12.3196 0.761169C12.3196 0.761169 11.632 3.74867 13.351 6.41867C15.0695 9.08867 20.938 14.3502 12.637 19.2408C12.637 19.2408 14.395 16.7423 13.5094 15.0372C12.6238 13.332 10.7206 12.063 11.0374 9.39284C11.0374 9.39284 8.52639 10.4374 9.63635 15.169C9.63635 15.169 8.22216 14.6536 7.62686 13.2592C7.62686 13.2592 6.74782 15.9952 8.36064 19.1945C8.36064 19.1945 -0.164862 15.1288 6.70822 7.23167C6.70822 7.23167 6.8534 9.80934 7.87164 10.5233C7.87164 10.5233 6.1928 3.544 12.3195 0.761169H12.3196Z" fill="#FF414D"/>
      </g>
      <defs>
      <clipPath id="clip0_151_41">
      <rect width="20" height="20" fill="white" transform="translate(0.5 0.000976562)"/>
      </clipPath>
      </defs>
      </svg>

    {% else %}
    <svg width="26" height="25" viewBox="0 0 26 25" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_3_2761)">
    <path d="M15.4113 4.81976C12.6288 2.03705 8.10106 2.03705 5.31856 4.81976C2.53606 7.60247 2.53606 12.1298 5.31856 14.9125C6.658 16.2489 8.47273 16.9995 10.365 16.9995C12.2571 16.9995 14.0719 16.249 15.4115 14.9125C18.1938 12.1298 18.1938 7.60226 15.4113 4.81976H15.4113ZM14.6517 14.1527C13.515 15.2883 11.9738 15.926 10.3671 15.9256C8.76031 15.9251 7.21959 15.2864 6.08354 14.1501C4.94756 13.0137 4.30946 11.4728 4.30946 9.8659C4.30946 8.25903 4.94756 6.7182 6.08354 5.58174C7.21961 4.44543 8.76042 3.80684 10.3671 3.80634C11.9739 3.80585 13.515 4.44355 14.6517 5.57913C15.7868 6.71699 16.4244 8.25872 16.4244 9.86601C16.4244 11.4733 15.7868 13.0148 14.6517 14.1527Z" fill="#25A799"/>
    <path d="M20.098 16.7225C19.9973 16.6217 19.8607 16.5652 19.7182 16.5652C19.5758 16.5652 19.4391 16.6217 19.3384 16.7225L18.6597 17.4012L17.2422 15.9835C18.8335 14.1943 19.6651 11.8554 19.5601 9.46312C19.4552 7.07083 18.4221 4.81354 16.6803 3.17062C14.9383 1.52756 12.6247 0.627911 10.2305 0.662911C7.83611 0.697742 5.54965 1.66429 3.85653 3.35749C2.16292 5.05068 1.1959 7.33729 1.1609 9.73187C1.12583 12.1265 2.0254 14.4404 3.66861 16.1825C5.31184 17.9246 7.56944 18.9577 9.96194 19.0623C12.3544 19.167 14.6936 18.3351 16.4828 16.7431L17.9004 18.1608L17.2217 18.8395C17.121 18.9402 17.0643 19.0768 17.0643 19.2193C17.0643 19.3617 17.121 19.4983 17.2217 19.5991L21.3671 23.7445C21.881 24.2583 22.6299 24.459 23.3318 24.2709C24.0338 24.0829 24.5821 23.5346 24.7701 22.8326C24.9582 22.1307 24.7575 21.3818 24.2437 20.8679L20.098 16.7225ZM4.61613 15.615C3.5988 14.6076 2.86548 13.3496 2.4903 11.9677C2.11513 10.586 2.11155 9.12976 2.47988 7.74622C2.84813 6.36268 3.57517 5.10101 4.58759 4.08851C5.60001 3.07601 6.86175 2.3491 8.2453 1.98081C9.62884 1.61247 11.0851 1.61606 12.4668 1.99122C13.8485 2.36631 15.1065 3.09962 16.114 4.11706C17.1314 5.12439 17.8647 6.38247 18.2399 7.76435C18.615 9.14602 18.6186 10.6023 18.2503 11.9858C17.882 13.3693 17.155 14.631 16.1426 15.6435C15.1302 16.656 13.8684 17.3829 12.4849 17.7512C11.1013 18.1196 9.64509 18.116 8.26342 17.7408C6.88167 17.3657 5.62363 16.6324 4.61613 15.615ZM23.484 22.9852C23.3039 23.1649 23.0598 23.2658 22.8053 23.2658C22.5509 23.2658 22.3067 23.1649 22.1266 22.9852L18.3608 19.2193L19.7182 17.8619L23.484 21.6278C23.6637 21.8079 23.7647 22.052 23.7647 22.3065C23.7647 22.561 23.6637 22.805 23.484 22.9852Z" fill="#25A799"/>
    <path d="M12.5708 6.5977C11.7559 6.59298 10.9693 6.89572 10.3677 7.44543C9.79238 6.9062 9.00494 6.5977 8.15578 6.5977C6.4083 6.5977 4.98682 7.96374 4.98682 9.6427C4.98682 10.8497 5.87027 12.1531 7.61265 13.5162H7.61273C8.40081 14.1278 9.23731 14.6743 10.1138 15.1505C10.2692 15.232 10.4547 15.2325 10.6105 15.1517C11.488 14.6807 12.3251 14.138 13.1132 13.5291C14.8564 12.1713 15.7401 10.8637 15.7401 9.64263C15.7396 7.96375 14.3181 6.59763 12.5705 6.59763L12.5708 6.5977ZM10.3668 14.0635C9.63309 13.6464 8.92996 13.1779 8.26265 12.6613C6.84265 11.548 6.06057 10.4761 6.06057 9.64293C6.06057 8.55618 7.00034 7.67205 8.15536 7.67205C8.88909 7.67205 9.54696 8.00522 9.9144 8.56315C10.0129 8.71257 10.1794 8.80315 10.3583 8.8047H10.3634C10.5408 8.8047 10.7067 8.71705 10.8068 8.57066C11.1913 8.00799 11.8508 7.67222 12.5709 7.67222C13.726 7.67222 14.6657 8.55634 14.6657 9.64309C14.6659 11.3334 11.7672 13.2885 10.3669 14.0635L10.3668 14.0635Z" fill="#25A799"/>
    </g>
    <defs>
    <clipPath id="clip0_3_2761">
    <rect width="25" height="25" fill="white" transform="translate(0.5 0.00100708)"/>
    </clipPath>
    </defs>
    </svg>
    {% endif %}
      {{ moddedViewNumber }} views in the last 7 days!
  </div>
</div>

