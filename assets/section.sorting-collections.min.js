!function(t){"use strict";theme.SortingCollections=function(){function e(e){this.$container=t(e),this.namespace=".sorting-collections",this.onLoad()}return e.prototype=t.extend({},Section.prototype,e.prototype,{onLoad:function(){function e(e,n){r&&r.abort(),n&&theme.Loader.set(i);var c=e.attr("data-collection"),s=i.attr("data-limit"),l=i.attr("data-grid");r=t.ajax({type:"GET",url:theme.routes.root_url+"collections/"+c,cache:!1,data:{view:"sorting",count_limit:s,grid_classes:encodeURIComponent(l)},dataType:"html",success:function(t){var c;if(i.html(t),i[0].hasAttribute("data-is-design-mode")&&(c=i.children(),c.addClass(l),c.length>s))for(var d=s;d<c.length;d++)c.eq(d).remove();theme.ImagesLazyLoad.update(),theme.ProductCurrency.update(),theme.ProductCountdown.init(i.find(".js-countdown").removeClass("js-countdown--lazy")),theme.ProductReview.update(),o.find("a").removeClass("active"),e.addClass("active"),a&&a.text(theme.strings.homepage.sorting_collections.button_more_products.replace("{{ collection }}",e.text())).attr("href",e.attr("href")),n&&theme.Loader.unset(i),r=null,i.append(`<div class='col-6 col-sm-6 col-md-4 col-lg-3'><a href='/collections/${e.attr("data-collection")}' class='btn btn--secondary btn--animated w-100 p-0' style='top: 40%;position: absolute;height: 15%;'><span class='d-flex flex-center'>VIEW MORE</span></a></div>`)}})}var o=this.$container.find("[data-sorting-collections-control]"),n=this.$container.find("[data-sorting-collections-ajax] [data-collection]"),i=this.$container.find("[data-sorting-collections-items]"),a=this.$container.find("[data-sorting-collections-more]"),r=null;this.$control=o,n.length&&e(n.first()),o.on("click","a",function(o){var n=t(this);return n.hasClass("active")||e(n,!0),o.preventDefault(),!1})},onUnload:function(){this.$container.off(this.namespace),this.$control.off()}}),e}(),t(function(){theme.sections.register("sorting-collections",theme.SortingCollections)})}(jQueryTheme);