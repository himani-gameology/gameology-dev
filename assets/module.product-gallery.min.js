!function(i){"use strict";i.widget("ui.productGallery",{options:{id:1,single:!1,media_id_index:[],grouped:!1,enable_zoom:!1,zoom_offset_coef:.75,main:{enabled:!1,device:"all",stretch_size:"auto",gallery_has_video:!1,video_autoplay:!0,slick:{lazyLoad:!1,slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,infinite:!1,touchMove:!1,adaptiveHeight:!0,rtl:theme.rtl}},thumbnail:{enabled:!1,device:"desktop",slick:{lazyLoad:!1,vertical:!0,verticalSwiping:!0,slidesToShow:6,slidesToScroll:6,dots:!1,arrows:!0,infinite:!1,touchMove:!1,responsive:[{breakpoint:1259,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:1024,settings:{vertical:!1,verticalSwiping:!1,slidesToShow:5,slidesToScroll:5,arrows:!1}}]}},collage:{enabled:!1,device:"desktop"},sheet:{enabled:!1,device:"desktop"},fullscreen:{enabled:!1,device:"desktop",slick:{lazyLoad:!1,slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,infinite:!1,touchMove:!1,adaptiveHeight:!1,rtl:theme.rtl}}},_create:function(){var e=this,t=i(".js-popup.active");this.$gallery=this.element,this.$main_slider=this.$gallery.find("[data-js-product-gallery-main-slider]"),this.$scroll_elem=t.length?t:$window;var s=JSON.parse(this.$gallery.find("[data-json-options-global]").html()),n=this.$gallery.find("[data-json-options-layout]");if(n=n.length?JSON.parse(n.html()):{},this.options=i.extend(!0,{},this.options,s,n),this.main_slides=[],this.indexes=[],i.each(this.options.media_id_index,function(i){e.indexes.push(i)}),this.options.grouped&&(this.indexes_cache=this.indexes),this.options.main.gallery_has_video&&(this.$control_gallery=this.$gallery.find("[data-js-product-gallery-control-video]"),this._loadMedia=function(e,t){var s;this[e][this.indexes[t]].$video&&!this[e][this.indexes[t]].$video[0].hasAttribute("src")?(this[e][this.indexes[t]].$video.attr("poster",this[e][this.indexes[t]].$video.attr("data-poster")),this[e][this.indexes[t]].$video.attr("src",this[e][this.indexes[t]].$video.find("source").first().attr("data-src"))):this[e][this.indexes[t]].$iframe&&!this[e][this.indexes[t]].$iframe.hasClass("loaded")?this[e][this.indexes[t]].$iframe.addClass("loading").one("load",function(){i(this).addClass("loaded").removeClass("loading")}).attr("src",this[e][this.indexes[t]].$iframe.attr("data-src")):this[e][this.indexes[t]].$template&&!this[e][this.indexes[t]].$template[0].hasAttribute("src")&&(s=i(this[e][this.indexes[t]].$template[0].content).children().first(),this[e][this.indexes[t]].$blockratio?(this[e][this.indexes[t]].$blockratio.find("[data-js-product-gallery-blockratio-content]").html(""),this[e][this.indexes[t]].$blockratio.find("[data-js-product-gallery-blockratio-content]").append(s)):(this[e][this.indexes[t]].$item.html(""),this[e][this.indexes[t]].$item.append(s)),this[e][this.indexes[t]].$model=s,this[e][this.indexes[t]].$template=null)},this._playVideo=function(i){i.hasClass("playing")||i.addClass("playing")[0].play()},this._pauseVideo=function(i){i.hasClass("playing")&&i.removeClass("playing")[0].pause()},this._playIframe=function(i){i.hasClass("playing")||i.addClass("playing")[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},this._pauseIframe=function(i){i.hasClass("playing")&&i.removeClass("playing")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")},this.switchMedia=function(i,t,s){"play"===s&&this.options.main.video_autoplay?this[i][this.indexes[t]].$video&&this[i][this.indexes[t]].$video[0].hasAttribute("src")?this._playVideo(this[i][this.indexes[t]].$video):this[i][this.indexes[t]].$iframe&&this[i][this.indexes[t]].$iframe.hasClass("loaded")&&this._playIframe(this[i][this.indexes[t]].$iframe):"pause"===s&&(this[i][this.indexes[t]].$video&&this[i][this.indexes[t]].$video[0].hasAttribute("src")?this._pauseVideo(this[i][this.indexes[t]].$video):this[i][this.indexes[t]].$iframe&&(this[i][this.indexes[t]].$iframe.hasClass("loaded")?this._pauseIframe(this[i][this.indexes[t]].$iframe):this[i][this.indexes[t]].$iframe.hasClass("loading")&&this[i][this.indexes[t]].$iframe.one("load",function(){e._pauseIframe(e[i][e.indexes[t]].$iframe)})))}),this.options.enable_zoom&&(this._initZoom=function(){$window.on("mousemove.productgallery."+this.options.id,function(i){e.cursor={clientY:i.clientY,clientX:i.clientX}}),this._getZoomObj=function(){e.zooms=[];var t=this.$gallery.find("[data-js-product-gallery-zoom]");t.each(function(){var t=i(this);e.zooms.push({$zoom:t,$container:t.find("[data-js-product-gallery-zoom-container]"),$ration:t.find("[data-js-product-gallery-zoom-ratio]"),$image:t.find("[data-js-product-gallery-zoom-image]")})})},this._updateZoomSize=function(i,e,t){this[i][this.indexes[t]].$img&&(this.zoom_current_size={main_image_width:this[i][this.indexes[t]].$img.innerWidth(),main_image_height:this[i][this.indexes[t]].$img.innerHeight()},this[i][this.indexes[t]].blockratio_width&&this.zooms[e].$container.attr("style","width: "+this[i][this.indexes[t]].blockratio_width+"% !important;"+(this[i][this.indexes[t]].blockratio_width>100?" margin-left: -"+(this[i][this.indexes[t]].blockratio_width-100)/2+"% !important;":"")),this.zooms[e].$ration.css({"padding-top":100/+this[i][this.indexes[t]].$img.attr("data-aspect-ratio")+"%"}),this.zooms[e].$image.css({"padding-top":100/+this[i][this.indexes[t]].$img.attr("data-aspect-ratio")+"%"}))},this._switchZoom=function(i,t,s,n){if(n){if(this[i][this.indexes[s]].$img&&this.zoom_current_image_index!==s){var o=function(){var n=e[i][e.indexes[s]].$img.clone();n[0].hasAttribute("srcset")&&n.addClass("donothide"),e._updateZoomSize(i,t,s),e.zooms[t].$image.append(n.removeAttr("data-ll-status").removeClass("loaded entered")),theme.ImagesLazyLoad.update(n),e.zooms[t].$zoom.removeClass("invisible"),e.zoom_current_index=t,e.zoom_current_image_index=s};this[i][this.indexes[s]].lazyloaded||!this[i][this.indexes[s]].lazyload_hold?o():(this[i][this.indexes[s]].event_zoom_load=!0,this[i][this.indexes[s]].$img.one("load.zoom",function(){o(),e[i][e.indexes[s]].event_zoom_load=null}))}}else!t&&this.zoom_current_index&&(t=this.zoom_current_index,s=this.zoom_current_image_index),this[i][this.indexes[s]]&&this[i][this.indexes[s]].$img&&(this[i][this.indexes[s]].event_zoom_load&&(this[i][this.indexes[s]].$img.unbind("load.zoom"),this[i][this.indexes[s]].event_zoom_load=null),this.zooms[t].$zoom.addClass("invisible"),this.zooms[t].$image.html(""),this.zooms[t].$container.add(this.zooms[t].$image).removeAttr("style")),this.zoom_current_size=null,this.zoom_current_index=null,this.zoom_current_image_index=null},this._updateZoomPosition=function(i,e,t){if(this.cursor){var s=t[0].getBoundingClientRect(),n=this.zoom_current_size.main_image_height*this.options.zoom_offset_coef,o=this.zoom_current_size.main_image_width*this.options.zoom_offset_coef,l=(this.zoom_current_size.main_image_height-n)/2,a=(this.zoom_current_size.main_image_width-o)/2,d=this.cursor.clientY-s.top,r=this.cursor.clientX-s.left,h=0,c=0;d>=this.zoom_current_size.main_image_height-l?h=Math.floor((this.zoom_current_size.main_image_height-2*l)*(3*this.zoom_current_size.main_image_height-this.zoom_current_size.main_image_height)/n):d>l&&(h=Math.floor((d-l)*(3*this.zoom_current_size.main_image_height-this.zoom_current_size.main_image_height)/n)),r>=this.zoom_current_size.main_image_width-a?c=Math.floor((this.zoom_current_size.main_image_width-2*a)*(3*this.zoom_current_size.main_image_width-this.zoom_current_size.main_image_width)/o):r>a&&(c=Math.floor((r-a)*(3*this.zoom_current_size.main_image_width-this.zoom_current_size.main_image_width)/o)),this.zooms[e].$image.css({top:h*-1+"px",left:c*-1+"px"})}},this._addZoomImgEvents=function(t,s,n,o){t.on({mouseenter:function(){e._switchZoom(s,n,"function"==typeof o?o():o,!0)},mouseleave:function(){e.zooms[n].$image.addClass("invisible"),t.removeClass("is-zooming")},mousemove:function(){e.zoom_current_size&&(e._updateZoomPosition(s,n,i(this)),t.addClass("is-zooming"),e.zooms[n].$image.removeClass("invisible"))}},"img")},this._addSingleZoomImgEvents=function(i,t,s){this._addZoomImgEvents(i,t,0,s),this.$scroll_elem.on("scroll.productgallery."+this.options.id,function(){e[t][e.indexes["function"==typeof s?s():s]].$img&&i.hasClass("is-zooming")&&e._updateZoomPosition(t,0,e[t][e.indexes["function"==typeof s?s():s]].$img)})},this._addMultipleZoomImgEvents=function(t,s){var n=0;i.each(this[t],function(i){this.$img&&e._addZoomImgEvents(this.$item,t,n++,function(){return e.indexes.indexOf(i)})}),this.$scroll_elem.on("scroll.productgallery."+this.options.id,function(){var n=0;i.each(e[s],function(){if(this.$img){if(this.$item.hasClass("is-zooming"))return e._updateZoomPosition(t,n,this.$img),!1;n++}})})},this._getZoomObj(),delete this._initZoom},this._resizeInit(function(){e._initZoom.call(e)},"desktop")),this.options.main.enabled||this.options.fullscreen.enable){this._loadSlideImage=function(i,t){this[i][this.indexes[t]].lazyload_hold&&(this[i][this.indexes[t]].lazyload_hold=null,this[i][this.indexes[t]].$img.hasClass("loaded")?this[i][this.indexes[t]].lazyloaded=!0:this[i][this.indexes[t]].$img.removeClass("lazyload--hold").one("load",function(){e[i][e.indexes[t]].lazyloaded=!0}),theme.ImagesLazyLoad.update(this[i][this.indexes[t]].$img))},this._loadSlideContent=function(i,e){this._loadSlideImage(i,e),this._loadMedia&&this._loadMedia(i,e)},this._timeoutCheckSliderContent=function(i){this.check_slider_content_timeout=setTimeout(function(){e._checkSliderContent("main_slides")},i)},this._clearTimeoutCheckSliderContent=function(){this.check_slider_content_timeout&&(clearTimeout(this.check_slider_content_timeout),this.check_slider_content_timeout=null)},this._checkSliderContent=function(t,s){this._clearTimeoutCheckSliderContent();var n,o=!1;i.each(this.indexes,function(i){e[t][e.indexes[i]].$item.hasClass("slick-active")?(e._loadSlideContent(t,i),(e[t][e.indexes[i]].$video||e[t][e.indexes[i]].$iframe)&&(e.options.main.gallery_has_video&&e.switchMedia(t,i,o?"pause":"play"),o=!0),!s&&!n&&i>0&&e._loadSlideContent(t,i-1),n=i):(e.options.main.gallery_has_video&&e.switchMedia(t,i,"pause"),void 0!==n&&i===n+1&&e._loadSlideContent(t,i),s||void 0===n||i!==n+2||e._loadSlideContent(t,i))})};var o=function(i,t,s){e[i].on({afterChange:function(i,n){e[s]=n,e._checkSliderContent(t)}})}}this.options.main.enabled&&(this._initMainSlider=function(){this.$main_slider_wrapper=this.$main_slider.parent("[data-js-product-gallery-main-slider-wrapper]"),this.$main_slider.removeClass("d-none-important"),this.options.main.slick.arrows&&(this.options.main.slick.prevArrow=this.$main_slider_wrapper.find("[data-js-product-gallery-main-arrow-prev]"),this.options.main.slick.nextArrow=this.$main_slider_wrapper.find("[data-js-product-gallery-main-arrow-next]")),this.options.grouped&&(this._groupMainSlider=function(i){this.current_group_main_slider!==i&&(this.options.main.gallery_has_video&&this.switchMedia("main_slides",this.main_slick.currentSlide,"pause"),this._switchZoom&&this._switchZoom("main_slides",0,this.main_slick.currentSlide),this.$main_slider.slick("slickUnfilter"),this.options.group_values.indexOf(i)!==-1&&this.$main_slider.slick("slickFilter",'[data-group="'+i+'"], [data-group="video_group"]'),this.$main_slider.slick("setPosition"),this.main_slick=this.$main_slider.slick("getSlick"),this._updateData("main_slides","main_slick",0,i),e._mainGoToSlide(0),this._checkSliderContent("main_slides"),this.current_group_main_slider=i)}),this.$main_slider.one("init",function(i,t){e.$main_slider_wrapper.addClass("initialized"),theme.Loader.unset(e.$main_slider_wrapper),e.main_slick=t,e._updateData("main_slides","main_slick",e.options.main.slick.initialSlide),e.options.first_load_group||e._checkSliderContent("main_slides",!0),e._mainGoToSlide=function(i){this.$main_slider.slick("slickGoTo",i,!0)},$window.on("theme.changed.breakpoint.productgallery."+e.options.id,function(){e.$main_slider.slick("setPosition")}),o("$main_slider","main_slides","main_slick")}),this.options.main.gallery_has_video&&this.$control_gallery.on("click",function(){e.goToSlide(e.first_video_index)}),this.$main_slider.slick(this.options.main.slick),this.options.enable_zoom&&(this._initMainZoom=function(){this.$main_slider.on({beforeChange:function(i,t,s){e._switchZoom("main_slides",0,s)},afterChange:function(i,t,s){e._switchZoom("main_slides",0,s,!0)}}),1===this.options.main.slick.slidesToShow?this._addSingleZoomImgEvents(this.$main_slider,"main_slides",function(){return e.main_slick.currentSlide}):this._addMultipleZoomImgEvents("main_slides","main_slides"),delete this._initMainZoom},this._resizeInit(function(){e.$main_slider.hasClass("slick-initialized")?e._initMainZoom.call(e):e.$main_slider.on("init",e._initMainZoom.apply(e))},"desktop")),delete this._initMainSlider},this._resizeInit(function(){e._initMainSlider.call(e),e.options.first_load_group&&e._groupMainSlider(e.options.first_load_group)},this.options.main.device)),this.options.thumbnail.enabled&&(this.$thumbnail_slider=this.$gallery.find("[data-js-product-gallery-thumbnail-slider]"),this._initThumbnailSlider=function(){this.$thumbnail_items=this.$thumbnail_slider.find("[data-js-product-gallery-thumbnail-item]"),this.options.grouped&&(this._groupThumbnailSlider=function(i){this.current_group_thumbnail!==i&&(this.$thumbnail_slider.slick("slickUnfilter"),this.options.group_values.indexOf(i)!==-1&&this.$thumbnail_slider.slick("slickFilter",'[data-group="'+i+'"], [data-group="video_group"]'),this.$thumbnail_slider.slick("setPosition"),this.$thumbnail_items=this.$thumbnail_slider.find("[data-js-product-gallery-thumbnail-item]"),this._thumbnailGoToSlide(0),theme.ImagesLazyLoad.update(),this.current_group_thumbnail=i)}),this.$thumbnail_slider.removeClass("d-none-important"),this.options.thumbnail.slick.prevArrow=this.$gallery.find("[data-js-product-gallery-thumbnail-arrow-prev]"),this.options.thumbnail.slick.nextArrow=this.$gallery.find("[data-js-product-gallery-thumbnail-arrow-next]"),this.$thumbnail_slider.one("init",function(){e.$thumbnail_items.removeClass("current").eq(e.main_slick.currentSlide).addClass("current"),$window.on("theme.changed.breakpoint.productgallery."+e.options.id,function(){e.$thumbnail_slider.slick("setPosition")}),e._thumbnailGoToSlide=function(i){e.$thumbnail_slider.slick("slickGoTo",i),e.$thumbnail_items.removeClass("current").eq(i).addClass("current")},e.$main_slider.on("beforeChange",function(i,t,s,n){e._thumbnailGoToSlide(n)}),e.$thumbnail_items.on("click",function(){var t=i(this);t.hasClass("current")||e.goToSlide(e.$thumbnail_items.index(t))})}),this.main_slick.currentSlide&&(this.options.thumbnail.slick.initialSlide=this.main_slick.currentSlide),this.$thumbnail_slider.slick(this.options.thumbnail.slick),delete this._initThumbnailSlider},this._resizeInit(function(){e._initThumbnailSlider.call(e),e.current_group_main_slider&&e._groupThumbnailSlider(e.current_group_main_slider)},this.options.thumbnail.device)),this.options.collage.enabled&&(this.$collage=this.$gallery.find("[data-js-product-gallery-collage]"),this._initCollage=function(){this.$collage_items=this.$collage.find("[data-js-product-gallery-thumbnail-item]"),this.options.grouped&&(this._groupCollage=function(i){var e;this.current_group_collage!==i&&(e=this.$collage.find("[data-js-product-gallery-thumbnail-item]"),e.removeClass("d-none"),this.options.group_values.indexOf(i)!==-1&&e.not('[data-group="'+i+'"], [data-group="video_group"]').addClass("d-none"),this.$collage_items=this.$collage.find("[data-js-product-gallery-thumbnail-item]").not(".d-none"),this._collageGoToSlide(0),this.current_group_collage=i)}),this.$collage_items.removeClass("current").eq(this.indexes[this.main_slick.currentSlide]).addClass("current"),this._collageGoToSlide=function(i){this.$collage_items.removeClass("current").eq(i).addClass("current")},this.$main_slider.on("beforeChange",function(i,t,s,n){e._collageGoToSlide(n)}),this.$collage_items.on("click",function(){var t=i(this);t.hasClass("current")||e.goToSlide(e.$collage_items.index(t))}),delete this._initCollage},this._resizeInit(function(){e._initCollage.call(e)},this.options.collage.device)),this.options.sheet.enabled&&(this._initSheet=function(){this.$sheet=this.$gallery.find("[data-js-product-gallery-sheet]"),this.$sheet_items=this.$sheet.find("[data-js-product-gallery-sheet-item]"),this.sheet_slides=[],this.sheet_contents={currentSlide:0,$slides:[]},this._updateSheetContentData=function(i){this.sheet_contents.$slides=i?this.$sheet_items:this.$sheet_items.not(".d-none")},this._updateSheetContentData(!0),this._updateData("sheet_slides","sheet_contents",0),this.sheet_slides_all=this.sheet_slides,this.options.grouped&&(this._groupSheet=function(i){this.current_group_sheet!==i&&(this._switchZoom&&this._switchZoom("sheet_slides"),this.$sheet_items.removeClass("d-none"),this.options.group_values.indexOf(i)!==-1&&this.$sheet_items.not('[data-group="'+i+'"], [data-group="video_group"]').addClass("d-none"),this._updateSheetContentData(),this._updateData("sheet_slides","sheet_contents",0,i),this.current_group_sheet=i)}),this.options.main.gallery_has_video&&(this.$control_gallery.on("click",function(){e.$scroll_elem[0]===window?i("html, body").velocity("scroll",{offset:e.sheet_slides[e.indexes[e.first_video_index]].$video.offset().top,duration:500,complete:function(){e.options.main.gallery_has_video&&e.switchMedia("sheet_slides",e.first_video_index,"play")}}):e.$scroll_elem.animate({scrollTop:0},{duration:500,complete:function(){}})}),$window.on("product-gallery-fullscreen.open."+this.options.id,function(){i.each(e.indexes,function(i){e.options.main.gallery_has_video&&e.switchMedia("sheet_slides",i,"pause")})})),this.options.enable_zoom&&(this._initSheetZoom=function(){this._addMultipleZoomImgEvents("sheet_slides","sheet_slides_all"),delete this._initSheetZoom},this._resizeInit(function(){e._initSheetZoom.call(e)},"desktop")),delete this._initSheet},this._resizeInit(function(){e._initSheet.call(e),e.options.first_load_group&&(e._updateSheetContentData(),e._updateData("sheet_slides","sheet_contents",0,e.options.first_load_group))},this.options.collage.device)),this.options.single&&(this._initSingle=function(){this.$single=this.$gallery.find("[data-js-product-gallery-main-single]"),this.single_content={currentSlide:0,$slides:this.$single.find("[data-js-product-gallery-main-item]")},this._updateData("single_slides","single_content",0),this.options.enable_zoom&&(this._initSingleZoom=function(){this._addSingleZoomImgEvents(this.$single,"single_slides",0),delete this._initSingleZoom},this._resizeInit(function(){e._initSingleZoom.call(e)},"desktop")),delete this._initSingle},this._resizeInit(function(){e._initSingle.call(e)},"desktop")),this.options.fullscreen.enable&&(this._initFullscreen=function(){this.$control_fullscreen=this.$gallery.find("[data-js-product-gallery-control-fullscreen]"),this.$fullscreen=this.$gallery.find("[data-js-product-gallery-fullscreen]"),this.$fullscreen_slider=this.$gallery.find("[data-js-product-gallery-fullscreen-slider]"),this.options.fullscreen.slick.arrows&&(this.options.fullscreen.slick.prevArrow=this.$fullscreen.find("[data-js-product-gallery-fullscreen-arrow-prev]"),this.options.fullscreen.slick.nextArrow=this.$fullscreen.find("[data-js-product-gallery-fullscreen-arrow-next]")),this._toggleFullscreen=function(t,s,n){n=n?n:this.$fullscreen.hasClass("show")?"hide":"show","show"===n?($body.addClass("product-gallery-fullscreen"),this.$fullscreen.addClass("show").one("transitionend",function(){e.$fullscreen.removeClass("animate")}).addClass("animate"),setTimeout(function(){e.$fullscreen.addClass("visible"),"0s"===e.$fullscreen.css("transition-duration")&&e.$fullscreen.trigger("transitionend")},0),i.each(this.indexes,function(s){var n,o,l;e[t][e.indexes[s]].$img?(n=e[t][e.indexes[s]].$img.parent().clone(),o=n.find("img"),o.removeAttr("data-ll-status").removeClass("lazyload--hold loaded").addClass("rimage__img--contain"),o[0].hasAttribute("srcset")&&o.addClass("donothide"),l=n):e[t][e.indexes[s]].$video?(l=e[t][e.indexes[s]].$video.parent().clone(),l.find("video").removeClass("playing")):e[t][e.indexes[s]].$iframe?(l=e[t][e.indexes[s]].$iframe.parent().clone(),l.find("iframe").removeClass("playing")):e[t][e.indexes[s]].$template?l=e[t][e.indexes[s]].$template.clone():e[t][e.indexes[s]].$item.find(".model-viewer-wrapper").length&&(l=e[t][e.indexes[s]].$item.find(".model-viewer-wrapper").clone()),e.$fullscreen_slider.append(i("<div>").addClass("product-gallery__fullscreen_item").append(l))}),this.$fullscreen_slider.one("init",function(i,n){e.fullscreen_slick=n,e.fullscreen_slides=[],e._updateData("fullscreen_slides","fullscreen_slick",e[t].currentSlide),theme.ImagesLazyLoad.update(),o("$fullscreen_slider","fullscreen_slides","fullscreen_slick"),e.options.main.gallery_has_video&&(e.switchMedia(t,e[s].currentSlide,"pause"),e.switchMedia("fullscreen_slides",e[s].currentSlide,"play"))}),this.options.fullscreen.slick.initialSlide=e[s].currentSlide,this.$fullscreen_slider.slick(e.options.fullscreen.slick),$body.on("keyup.productgallery.fullscreen."+e.options.id,function(i){27===i.keyCode?e._toggleFullscreen(null,null,"hide"):37===i.keyCode||40===i.keyCode?e.$fullscreen_slider.slick("slickGoTo",e.fullscreen_slick.currentSlide-1):38!==i.keyCode&&39!==i.keyCode||e.$fullscreen_slider.slick("slickGoTo",e.fullscreen_slick.currentSlide+1)})):(this.$fullscreen.unbind("transitionend").one("transitionend",function(){e.$fullscreen.removeClass("show animate"),$body.removeClass("product-gallery-fullscreen"),e.$fullscreen_slider.slick("unslick").off().html("")}).addClass("animate"),setTimeout(function(){e.$fullscreen.hasClass("visible")&&"0s"!==e.$fullscreen.css("transition-duration")||e.$fullscreen.trigger("transitionend"),e.$fullscreen.removeClass("visible")},0),$window.unbind("theme.resize.productgallery.fullscreen."+e.options.id),$body.unbind("keyup.productgallery.fullscreen."+e.options.id),this.fullscreen_slick=null,this.fullscreen_slides=null)},this.$control_fullscreen.on("click",function(){var i=e.options.sheet.enabled?"sheet_slides":e.options.single?"single_slides":"main_slides",t=e.options.sheet.enabled?"sheet_contents":e.options.single?"single_content":"main_slick";Loader.loadManually([{type:"styles",name:"plugin_slick"},{type:"scripts",name:"plugin_slick"}],function(){e._toggleFullscreen(i,t)}),$window.trigger("product-gallery-fullscreen.open."+e.options.id)}),delete this._initFullscreen},this._resizeInit(function(){e.$main_slider.hasClass("slick-initialized")?e._initFullscreen.call(e):e.$main_slider.on("init",e._initFullscreen.apply(e))},"desktop")),this.$gallery.addClass("initialized"),delete this._create},_updateData:function(e,t,s,n){var o=this,l=0;if(n&&(this.options.group_values.indexOf(n)!==-1?(this.indexes=[],i.each(this.options.group_values,function(i,e){e!==n&&"video_group"!==e||o.indexes.push(i)})):this.indexes=this.indexes_cache),this[t])for(this[e]=[],this.first_video_index=null;l<this.indexes.length;l++){var a=i(this[t].$slides[l]),d={},r=a.find("img, video, iframe, template").first(),h=a.find(".model-viewer-wrapper");d.$item=a,r.length?d["$"+r[0].tagName.toLowerCase()]=r:h.length&&(d.$model=h),h.length||"TEMPLATE"===r[0].tagName?"main_slides"===e&&"auto"!==o.options.main.stretch_size&&(d.$blockratio=a.find("[data-js-product-gallery-blockratio]")):"IMG"===r[0].tagName?"main_slides"===e&&(l!==s||n?d.lazyload_hold=!0:d.lazyloaded=!0,"auto"!==o.options.main.stretch_size&&(d.$blockratio=a.find("[data-js-product-gallery-blockratio]"),d.blockratio_width=d.$blockratio.attr("data-width"))):"VIDEO"!==r[0].tagName&&"IFRAME"!==r[0].tagName||null!==o.first_video_index||(o.first_video_index=l),this[e][o.indexes[l]]=d}},_resizeInit:function(i,e){var t="theme.changed.breakpoint.productgallery.init."+this.options.id+"."+Math.random();"all"===e||"desktop"===e&&theme.current.is_desktop||"mobile"===e&&theme.current.is_mobile?i():"desktop"!==e&&"mobile"!==e||$window.on(t,function(){("desktop"===e&&theme.current.is_desktop||"mobile"===e&&theme.current.is_mobile)&&($window.unbind(t),i())})},goToSlide:function(i){this._mainGoToSlide&&this._mainGoToSlide(i),this._thumbnailGoToSlide&&this._thumbnailGoToSlide(i),this._collageGoToSlide&&this._collageGoToSlide(i)},goToSlideById:function(i,e){var t;this.options.grouped?(this._groupMainSlider&&this._groupMainSlider(e),this._groupThumbnailSlider&&this._groupThumbnailSlider(e),this._groupCollage&&this._groupCollage(e),this._groupSheet&&this._groupSheet(e)):(t=this.options.media_id_index.indexOf(i),t===-1&&(t=0),this.goToSlide(t))},destroy:function(){this.$main_slider&&this.$main_slider.hasClass("slick-initialized")&&(this._clearTimeoutCheckSliderContent(),this.$main_slider.slick("unslick").off()),this.$thumbnail_items&&this.$thumbnail_slider.slick("unslick").off(),$window.unbind("theme.changed.breakpoint.productgallery"+this.options.id),$window.unbind("theme.resize.productgallery."+this.options.id),$window.unbind("product-gallery-fullscreen.open."+this.options.id),$window.unbind("scroll.productgallery."+this.options.id),$window.unbind("mousemove.productgallery."+this.options.id),$body.unbind("keyup.productgallery.fullscreen."+this.options.id),this.$gallery.find("*").off(),this.$gallery.removeClass("initialized"),i.Widget.prototype.destroy.call(this),delete this}})}(jQueryTheme);