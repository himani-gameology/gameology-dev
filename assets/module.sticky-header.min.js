!function(e){"use strict";theme.StickyHeader=function(){function t(){this.load()}t.prototype=e.extend({},t.prototype,{load:function(){var t=e(".js-header-sticky"),i=t.attr("data-js-sticky"),s=t.attr("data-js-desktop-sticky-sidebar");if(t.length){var o={bp:1024};"desktop_and_mobile"!==i&&"desktop"!==i||(e.extend(o,{desktop:{sticky:"[data-js-desktop-sticky]",limit:"bottom",fade:!0,duration:function(){return 1e3*theme.animations.sticky_header.duration}}}),"true"===s&&e.extend(o.desktop,{move:[{elem:'[data-js-sticky-replace-element="logo"]',to:'[data-js-sticky-replace-here="logo"]'},{elem:'[data-js-sticky-replace-element="cart"]',to:'[data-js-sticky-replace-here="cart"]'},{elem:'[data-js-sticky-replace-element="wishlist"]',to:'[data-js-sticky-replace-here="wishlist"]'},{elem:'[data-js-sticky-replace-element="compare"]',to:'[data-js-sticky-replace-here="compare"]'}]})),"desktop_and_mobile"!==i&&"mobile"!==i||e.extend(o,{mobile:{sticky:"[data-js-mobile-sticky]",limit:"bottom",fade:!1}}),this.api=this.init(t,o)}},init:function(t,i){if(t.length){var s={_create:function(){function t(){a._fix(a.$sticky,a.$spacer),a._move(a.options[a.bp]),$window.trigger("verticalmenu.checkheight")}function i(){a._unfix(a.$sticky,a.$spacer),a._return(a.options[a.bp]),$window.trigger("verticalmenu.checkheight")}function s(){var e=theme.current.is_desktop;a.bp=e?"desktop":"mobile",a.$sticky=e?r:n,a.$spacer=e?d:h,a.$sticky.length&&(e?(h.removeClass("header__spacer--visible"),d.addClass("header__spacer--visible"),n.hasClass(a.sticky_class)&&(a._unfix(n,h),a._return(a.options.mobile))):(d.removeClass("header__spacer--visible"),h.addClass("header__spacer--visible"),r.hasClass(a.sticky_class)&&(a._unfix(r,d),a._return(a.options.desktop))))}function o(){if(a.$sticky.length){var e=a.options[a.bp].limit?a.options[a.bp].limit:0,s=a.$spacer[0].getBoundingClientRect();"bottom"===e&&(e=a.$sticky.hasClass(a.sticky_class)?a.$spacer.innerHeight():a.$sticky.innerHeight()),e*=-1,s.top<e?(a.$sticky.hasClass(a.sticky_class)||t(),ie||a._check_height(a.$sticky,a.options[a.bp])):a.$sticky.hasClass(a.sticky_class)&&i()}}var a=this,c=this.bindings,n=c.find(this.options.mobile&&this.options.mobile.sticky?this.options.mobile.sticky:""),r=c.find(this.options.desktop&&this.options.desktop.sticky?this.options.desktop.sticky:""),h=e("<div>").addClass("header__spacer header__spacer--m").insertBefore(n),d=e("<div>").addClass("header__spacer header__spacer--d").insertBefore(r);this.sticky_class="header__content--sticky",s(),o(),theme.current.is_desktop&&theme.VerticalMenu&&theme.VerticalMenu.checkHeightVerticalMenu&&setTimeout(function(){$window.trigger("verticalmenu.checkheight")},50),$window.on({"theme.resize.stickyHeader":function(){s(),o()},"scroll.stickyHeader":o})},_fix:function(e,t){var i=e.innerHeight();t.height(i),this.options[this.bp].fade&&e.css({opacity:0}).velocity({opacity:theme.animations.sticky_header.opacity},this.options[this.bp].duration()),e.addClass(this.sticky_class)},_unfix:function(e,t){t.removeAttr("style"),this.options[this.bp].fade&&e.velocity("stop",!0),e.removeAttr("style").removeClass(this.sticky_class)},_move:function(t){t.move&&e.each(t.move,function(){var t=e(this.elem),i=e(this.to),s=this.method||"append";this.$elem=t,this.$parent=t.parent(),i[s](t)})},_return:function(t){t.move&&e.each(t.move,function(){var e=this.method||"append";this.$parent[e](this.$elem),this.$elem=null,this.$parent=null})},_check_height:function(e,t){if(t.height){var i=this.$spacer[0].getBoundingClientRect(),s=i.bottom<=t.height?t.height:i.bottom;e.css({"min-height":s})}},getStickyHeight:function(){return this.options[this.bp]?this.options[this.bp].height||e(this.options[this.bp].sticky).innerHeight():0},destroy:function(){e(window).unbind("resize.stickyHeader scroll.stickyHeader"),e.Widget.prototype.destroy.call(this)}};return e.widget("ui.stickyHeader",s),t.stickyHeader(i),this.$sticky=t,{destroy:function(){t.stickyHeader("destroy")}}}}}),theme.StickyHeader=new t},e(function(){theme.StickyHeader(),theme.current.is_desktop&&theme.StickySidebar&&theme.StickyHeader.$sticky.find(".header__content--sticky").length&&theme.StickySidebar.update()})}(jQueryTheme);