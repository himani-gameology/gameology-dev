!function(e){"use strict";theme.HomeBuilder=function(){function t(t){var i=this;this.$container=e(t),this.namespace=".home-builder",this.onLoad(),this.$container.on("section:reload",function(){i.onUnload(),i.onLoad()})}return t.prototype=e.extend({},Section.prototype,t.prototype,{onLoad:function(){var e=this,t=this.$container.find(".rev_slider"),i=this.$container.find(".slider"),a=this.$container.find("#instafeed"),n=this.$container.find(".promobox"),o=n.find(".js-parallax");t.length&&Loader.loadManually([{type:"styles",name:"plugin_revolution"},{type:"scripts",name:"plugin_revolution_slider"}],function(){this.initRevolution(t)}),i.length&&Loader.loadManually([{type:"styles",name:"plugin_slick"},{type:"scripts",name:"plugin_slick"}],function(){e.initSlick(i)}),o.length&&theme.Parallax&&theme.Parallax.init(o),a.length&&this.initInstafeed(a)},initSlick:function(t){var i=this;t.each(function(){var t=e(this),a=t.find("[data-js-slider-slick]"),n=t.find("[data-js-slider-prev]"),o=t.find("[data-js-slider-next]"),s=1e3*+a.attr("data-speed"),l="true"===a.attr("data-arrows"),r="true"===a.attr("data-bullets");i.$slick=a,a.one("init",function(){a.removeClass("invisible"),theme.Loader.unset(a.parent())}),a.find("video, iframe").length&&a.on("beforeChange",function(t,i,a,n){var o=e(i.$slides[n]),s=o.find("video"),l=o.find("iframe");s.length&&!s[0].hasAttribute("src")?(s.attr("poster",s.attr("data-poster")),s.attr("src",s.find("source").first().attr("data-src"))):l.length&&!l[0].hasAttribute("src")&&l.attr("src",l.attr("data-src"))}),a.slick({lazyLoad:!1,arrows:l,prevArrow:n,nextArrow:o,dots:r,dotsClass:"slick-dots d-none d-lg-flex flex-wrap flex-center position-absolute list-unstyled mt-35",adaptiveHeight:!0,autoplay:!0,autoplaySpeed:s,fade:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,rtl:theme.rtl})})},initRevolution:function(t){var i=this;t.each(function(){var t=e(this),a=t.data("gridwidth").split(","),n=t.data("gridheight").split(","),o=t.data("minheight"),s=t.data("slider-layout"),l=t.data("full-screen-offset-container")||null,r=t.show().revolution({sliderLayout:s,fullScreenOffsetContainer:l,responsiveLevels:[1259,1024,777,540],gridwidth:[+a[0],+a[1],+a[2],+a[3]],gridheight:[+n[0],+n[1],+n[2],+n[3]],minHeight:void 0!==o&&o,visibilityLevels:[1259,1024,777,540],delay:1e3*t.data("delay"),disableProgressBar:"on",lazyType:"single",spinner:"none",navigation:{arrows:{enable:t.data("arrows"),style:"uranus",hide_onleave:!1},bullets:{enable:t.data("bullets"),h_align:"center",v_align:"bottom",h_offset:0,v_offset:74,space:24,hide_onleave:!1,tmp:""},touch:{touchenabled:"on"}},parallax:{type:"mouse",origo:"slidercenter",speed:400,levels:[2,4,6,8,10,12,14,16,18,20,25,30,35,40,45,50],disable_onmobile:"on"}});i.$container.one("section.unload",function(){r.revkill()})})},initInstafeed:function(t){var i=t.find("template");if(i.length&&i[0].content){var a=e(t.find("template")[0].content).children().html(),n=t.data("tag"),o=t.data("limit"),s={},l={240:1,320:2,480:3,640:4},r=t.data("size")||"240";t.html(""),n?s.tag=n:s.username=t.data("username"),e.instagramFeed(e.extend(s,{container:"#instafeed",display_profile:!1,display_biography:!1,display_gallery:!0,styling:!1,items:o,items_per_row:4,margin:.5,get_data:!0,callback:function(e){for(var i=n?e.edge_hashtag_to_media:e.edge_owner_to_timeline_media,s=0;s<Math.min(o,i.edges.length);s++){var d=a.replace(/post-image/g,i.edges[s].node.thumbnail_resources[l[r]].src).replace(/post-link/g,"https://www.instagram.com/p/"+i.edges[s].node.shortcode).replace(/post-comments/g,i.edges[s].node.edge_media_to_comment.count).replace(/post-likes/g,i.edges[s].node.edge_media_preview_like.count);t.html(t.html()+d)}t.removeClass("d-none"),theme.ImagesLazyLoad.update()}}))}},onUnload:function(){this.$container.off(this.namespace),this.$container.trigger("section.unload"),this.$slick&&(this.$slick.slick("destroy").off(),$window.unbind("load.slickResize"),this.$slick=null),theme.Parallax&&theme.Parallax.destroy(this.$container.find(".js-parallax"))}}),t}(),e(function(){theme.sections.register("home-builder",theme.HomeBuilder),theme.sections.register("collection-fullwidth-head",theme.HomeBuilder),theme.sections.register("collection-head",theme.HomeBuilder)})}(jQueryTheme);